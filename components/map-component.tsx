"use client";

import React, { useState, useEffect, useRef } from 'react';
import { rectangleData as originalRectangleData, getTooltipPosition, fetchStores } from '@/components/assets/background-images/map';
import MapRectangle from './map-rectangle';
import { createClient } from "@/utils/supabase/client";
import { motion, AnimatePresence } from 'framer-motion';
import StoreComponent from './store-component';
import StoreStatusCard from './ui/store-status-card';
import VisitaPlaceholder from './visita-placeholder';
import { useMapSearch } from '@/components/map-search-context';

const mapComponent = () => {
  const [scale, setScale] = useState(1);
  const [selectedRectangle, setSelectedRectangle] = useState<string | null>(null);
  const containerRef = useRef(null);
  const originalWidth = 2560;
  const originalHeight = 1440;
  const headerHeight = 60;
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [storeData, setStoreData] = useState<any>(null);
  const [storeStatusMap, setStoreStatusMap] = useState<Record<string, boolean>>({});
  const [rectangleData, setRectangleData] = useState(originalRectangleData);
  const supabase = createClient();
  const { 
    selectedStoreId, 
    setSelectedStoreId, 
    storeName, 
    setStoreName, 
    isOpen, 
    setIsOpen,
    selectedProductName
  } = useMapSearch();

  // Add state for realtime subscription
  const [subscription, setSubscription] = useState<ReturnType<typeof supabase.channel> | null>(null);

  useEffect(() => {
    const calculateScale = () => {
      if (!containerRef.current) return;
  
      const container = containerRef.current as HTMLDivElement;
      const availableHeight = window.innerHeight - headerHeight;
      const availableWidth = container.offsetWidth;
      
      const widthScale = availableWidth / originalWidth;
      const heightScale = availableHeight / originalHeight;
      
      setScale(Math.min(widthScale, heightScale) * 1.08);
    };
  
    calculateScale();
    window.addEventListener('resize', calculateScale);
    return () => window.removeEventListener('resize', calculateScale);
  }, []);

  // Set up realtime subscription
  useEffect(() => {
    // First load all stores
    const loadAllStores = async () => {
      try {
        const { storeData, storeStatusMap } = await fetchStores();
        setStoreStatusMap(storeStatusMap);
        updateRectanglesBasedOnStoreStatus(storeStatusMap);
        setLoading(false);
      } catch (error) {
        console.error('Error loading stores:', error);
        setError('Failed to load stores');
        setLoading(false);
      }
    };
    
  loadAllStores();

  // Set up realtime subscription to storestatus table
  const storeStatusChannel = supabase
    .channel('store-status-changes')
    .on(
      'postgres_changes',
      {
        event: '*', // Listen to all events (insert, update, delete)
        schema: 'public',
        table: 'storestatus',
      },
      async (payload) => {
        console.log('Realtime update received:', payload);
        
        // More efficient approach: only update the specific store that changed
        if (payload.new && 'storeid' in payload.new) {
          const storeId = payload.new.storeid;
          const isStoreOpen = payload.new.status === true;
          
          // Update the store status map for just this store
          setStoreStatusMap(prev => ({
            ...prev,
            [storeId]: isStoreOpen
          }));
          
          // Update just this rectangle
          setRectangleData(prevRectangles => 
            prevRectangles.map(rect => {
              if (rect.id === storeId) {
                return {
                  ...rect,
                  iconColor: !isStoreOpen ? 'red' : originalRectangleData.find(r => r.id === storeId)?.iconColor || rect.iconColor,
                  style: !isStoreOpen ? {
                    ...rect.style,
                    background: '#f07474'
                  } : originalRectangleData.find(r => r.id === storeId)?.style || rect.style
                };
              }
              return rect;
            })
          );
          
          // If the currently selected store was updated, update its details
          if (selectedRectangle && storeId === selectedRectangle) {
            setIsOpen(isStoreOpen);
          }
        }
      }
    )
    .subscribe((status) => {
      console.log('Realtime store subscription status:', status);
    });
    setSubscription(storeStatusChannel);

    // Clean up subscription when component unmounts
    return () => {
      if (storeStatusChannel) {
        supabase.removeChannel(storeStatusChannel);
      } 
    };
  }, [selectedRectangle]);

  // Helper function to update rectangles based on store status
  const updateRectanglesBasedOnStoreStatus = (statusMap: Record<string, boolean>) => {
    const updatedRectangles = originalRectangleData.map(rect => {
      // Check if this rectangle corresponds to a store and if that store is closed
      const isClosed = statusMap[rect.id] === false;
      
      return {
        ...rect,
        iconColor: isClosed ? 'red' : rect.iconColor,
        // Update the style if the store is closed to have a black background
        style: isClosed ? {
          ...rect.style,
          background: '#f07474'
        } : rect.style
      };
    });
    
    setRectangleData(updatedRectangles);
  };

  // Fetch specific store data when a store is selected
  const fetchStoreData = async (id: string) => {
    try {
      setLoading(true);
      setError(null);

      // Joined the tables and selected everything from both tables
      const { data: store, error } = await supabase
        .from('store')
        .select(`
          *,
          storestatus:storestatus(*)
        `) 
        .eq('storeid', id);

      const fetchedStoreData = store ? store[0] : null;
      
      if (fetchedStoreData) {
        setStoreName(fetchedStoreData.name);
        setIsOpen(fetchedStoreData.storestatus.status === true);
        setStoreData(fetchedStoreData);
        
        // Update the store status map
        setStoreStatusMap(prev => ({
          ...prev,
          [id]: fetchedStoreData.storestatus.status === true
        }));
      } else {
        setStoreName('No Data');
        setIsOpen(false);
        setStoreData(null);
      }

    } catch (error) {
      setError('Failed to load store');
      console.error('Error fetching store:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleRectangleClick = (rectangleId: string) => {
    // Toggle selection - if clicking the same rectangle, deselect it
    const newSelectedRectangle = selectedRectangle === rectangleId ? null : rectangleId;
    setSelectedRectangle(newSelectedRectangle);
    
    // Update the context
    if (newSelectedRectangle) {
      setSelectedStoreId(newSelectedRectangle);
      fetchStoreData(newSelectedRectangle);
    } else {
      // Clear selection in context
      setSelectedStoreId(null);
    }

    // If selecting a rectangle, fetch its store data
    if (newSelectedRectangle) {
      fetchStoreData(newSelectedRectangle);
    }
    
    console.log(`Rectangle ${rectangleId} ${selectedRectangle === rectangleId ? 'deselected' : 'selected'}`);
  };

  // Handle store selection/deselection from StoreComponent
  const handleStoreSelect = (storeId: string | null) => {
    setSelectedRectangle(storeId);
    if (storeId) {
      fetchStoreData(storeId);
    }
    console.log(`Store selection changed to: ${storeId}`);
  };
  
  useEffect(() => {
    // Listen for the custom event from search-bar
    const handleStoreSelectedEvent = (event: CustomEvent) => {
      const { storeId } = event.detail;
      // Set the selected rectangle and fetch store data
      setSelectedRectangle(storeId);
      fetchStoreData(storeId);
    };

    // Add event listener
    window.addEventListener('storeSelected', handleStoreSelectedEvent as EventListener);

    // Clean up
    return () => {
      window.removeEventListener('storeSelected', handleStoreSelectedEvent as EventListener);
    };
  }, []);

  // Add a useEffect to handle selectedStoreId changes from context
  useEffect(() => {
    if (selectedStoreId && selectedStoreId !== selectedRectangle) {
      setSelectedRectangle(selectedStoreId);
      fetchStoreData(selectedStoreId);
    } else if (!selectedStoreId && selectedRectangle) {
      // If selectedStoreId is cleared, also clear the selectedRectangle
      setSelectedRectangle(null);
    }
  }, [selectedStoreId]);

  return (
      <div
      ref={containerRef}
      style={{
        width: '100%',
        height: '100%',
        position: 'relative',
        overflow: 'hidden',
      }}>
      <div
        style={{
          position: 'absolute',
          width: `${originalWidth}px`,
          height: `${originalHeight}px`,
          transform: `scale(${scale})`,
          transformOrigin: 'center top',
          left: '50%',
          marginLeft: `-${originalWidth / 2}px`,
          top: '-0.5rem',
        }}
      >

      {/* AnimatePresence to handle both components */}
      <AnimatePresence>
        {selectedStoreId ? (
          /* Store Component */
          <motion.div
            key="store-component"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.3 }}
          >
            <StoreComponent 
              storeId={selectedStoreId}
              isSelected={true}
              storeName={storeName || ""}
            />
          </motion.div>
        ) : (
          /* Placeholder  */
          <motion.div
            key="placeholder"
            initial={{ opacity: 0, transformOrigin: "top" }}
            animate={{ opacity: 1}}
            exit={{ opacity: 0, scaleY: 1 }}
            transition={{
              opacity: { duration: 0.3, ease: "easeIn" },
              scaleY: { duration: 0.5, ease: "easeIn" }
            }}
          >
            <VisitaPlaceholder />
          </motion.div>
        )}
      </AnimatePresence>

      {/* Store Status Card - with delayed appearance */}
      {selectedStoreId && (
        <motion.div 
          className="store-status-card"
          initial={{ opacity: 0, scale: 0.8 }}
          animate={{ opacity: 1, scale: 1 }}
          exit={{ opacity: 0, scale: 0.8 }}
          transition={{ 
            delay: 0.5,
            duration: 0.3 
          }}
        >
          <StoreStatusCard isOpen={isOpen || false} />
        </motion.div>
      )}

      {/* Exit for Vehicles */}
      <div className="absolute inset-0 z-10 right-[345] top-[1400] flex items-center justify-center pointer-events-none">
        <svg width="150" height="150" viewBox="0 0 210 125" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M27.8382 8.528V13.424H33.5982V15.656H27.8382V20.768H34.3182V23H25.1022V6.296H34.3182V8.528H27.8382ZM44.6001 9.56C45.6401 9.56 46.5681 9.776 47.3841 10.208C48.2161 10.64 48.8641 11.28 49.3281 12.128C49.7921 12.976 50.0241 14 50.0241 15.2V23H47.3121V15.608C47.3121 14.424 47.0161 13.52 46.4241 12.896C45.8321 12.256 45.0241 11.936 44.0001 11.936C42.9761 11.936 42.1601 12.256 41.5521 12.896C40.9601 13.52 40.6641 14.424 40.6641 15.608V23H37.9281V9.776H40.6641V11.288C41.1121 10.744 41.6801 10.32 42.3681 10.016C43.0721 9.712 43.8161 9.56 44.6001 9.56ZM56.9461 12.008V19.328C56.9461 19.824 57.0581 20.184 57.2821 20.408C57.5221 20.616 57.9221 20.72 58.4821 20.72H60.1621V23H58.0021C56.7701 23 55.8261 22.712 55.1701 22.136C54.5141 21.56 54.1861 20.624 54.1861 19.328V12.008H52.6261V9.776H54.1861V6.488H56.9461V9.776H60.1621V12.008H56.9461ZM65.6597 11.696C66.0597 11.024 66.5877 10.504 67.2437 10.136C67.9157 9.752 68.7077 9.56 69.6197 9.56V12.392H68.9237C67.8517 12.392 67.0357 12.664 66.4757 13.208C65.9317 13.752 65.6597 14.696 65.6597 16.04V23H62.9237V9.776H65.6597V11.696ZM71.4627 16.328C71.4627 15 71.7347 13.824 72.2787 12.8C72.8387 11.776 73.5907 10.984 74.5347 10.424C75.4947 9.848 76.5507 9.56 77.7027 9.56C78.7427 9.56 79.6467 9.768 80.4147 10.184C81.1987 10.584 81.8227 11.088 82.2867 11.696V9.776H85.0467V23H82.2867V21.032C81.8227 21.656 81.1907 22.176 80.3907 22.592C79.5907 23.008 78.6787 23.216 77.6547 23.216C76.5187 23.216 75.4787 22.928 74.5347 22.352C73.5907 21.76 72.8387 20.944 72.2787 19.904C71.7347 18.848 71.4627 17.656 71.4627 16.328ZM82.2867 16.376C82.2867 15.464 82.0947 14.672 81.7107 14C81.3427 13.328 80.8547 12.816 80.2467 12.464C79.6387 12.112 78.9827 11.936 78.2787 11.936C77.5747 11.936 76.9187 12.112 76.3107 12.464C75.7027 12.8 75.2067 13.304 74.8227 13.976C74.4547 14.632 74.2707 15.416 74.2707 16.328C74.2707 17.24 74.4547 18.04 74.8227 18.728C75.2067 19.416 75.7027 19.944 76.3107 20.312C76.9347 20.664 77.5907 20.84 78.2787 20.84C78.9827 20.84 79.6387 20.664 80.2467 20.312C80.8547 19.96 81.3427 19.448 81.7107 18.776C82.0947 18.088 82.2867 17.288 82.2867 16.376ZM95.5523 9.56C96.5923 9.56 97.5203 9.776 98.3363 10.208C99.1683 10.64 99.8163 11.28 100.28 12.128C100.744 12.976 100.976 14 100.976 15.2V23H98.2643V15.608C98.2643 14.424 97.9683 13.52 97.3763 12.896C96.7843 12.256 95.9763 11.936 94.9523 11.936C93.9283 11.936 93.1123 12.256 92.5043 12.896C91.9123 13.52 91.6163 14.424 91.6163 15.608V23H88.8803V9.776H91.6163V11.288C92.0643 10.744 92.6323 10.32 93.3203 10.016C94.0243 9.712 94.7683 9.56 95.5523 9.56ZM103.794 16.376C103.794 15.016 104.066 13.824 104.61 12.8C105.17 11.76 105.938 10.96 106.914 10.4C107.89 9.84 109.01 9.56 110.274 9.56C111.874 9.56 113.194 9.944 114.234 10.712C115.29 11.464 116.002 12.544 116.37 13.952H113.418C113.178 13.296 112.794 12.784 112.266 12.416C111.738 12.048 111.074 11.864 110.274 11.864C109.154 11.864 108.258 12.264 107.586 13.064C106.93 13.848 106.602 14.952 106.602 16.376C106.602 17.8 106.93 18.912 107.586 19.712C108.258 20.512 109.154 20.912 110.274 20.912C111.858 20.912 112.906 20.216 113.418 18.824H116.37C115.986 20.168 115.266 21.24 114.21 22.04C113.154 22.824 111.842 23.216 110.274 23.216C109.01 23.216 107.89 22.936 106.914 22.376C105.938 21.8 105.17 21 104.61 19.976C104.066 18.936 103.794 17.736 103.794 16.376ZM131.457 16.064C131.457 16.56 131.425 17.008 131.361 17.408H121.257C121.337 18.464 121.729 19.312 122.433 19.952C123.137 20.592 124.001 20.912 125.025 20.912C126.497 20.912 127.537 20.296 128.145 19.064H131.097C130.697 20.28 129.969 21.28 128.913 22.064C127.873 22.832 126.577 23.216 125.025 23.216C123.761 23.216 122.625 22.936 121.617 22.376C120.625 21.8 119.841 21 119.265 19.976C118.705 18.936 118.425 17.736 118.425 16.376C118.425 15.016 118.697 13.824 119.241 12.8C119.801 11.76 120.577 10.96 121.569 10.4C122.577 9.84 123.729 9.56 125.025 9.56C126.273 9.56 127.385 9.832 128.361 10.376C129.337 10.92 130.097 11.688 130.641 12.68C131.185 13.656 131.457 14.784 131.457 16.064ZM128.601 15.2C128.585 14.192 128.225 13.384 127.521 12.776C126.817 12.168 125.945 11.864 124.905 11.864C123.961 11.864 123.153 12.168 122.481 12.776C121.809 13.368 121.409 14.176 121.281 15.2H128.601ZM143.269 0.343998L136.741 27.2H134.053L140.557 0.343998H143.269ZM149.694 8.528V13.424H155.454V15.656H149.694V20.768H156.174V23H146.958V6.296H156.174V8.528H149.694ZM165.447 16.304L169.719 23H166.623L163.767 18.512L161.079 23H158.223L162.495 16.496L158.223 9.776H161.319L164.175 14.264L166.863 9.776H169.719L165.447 16.304ZM173.392 8.024C172.896 8.024 172.48 7.856 172.144 7.52C171.808 7.184 171.64 6.768 171.64 6.272C171.64 5.776 171.808 5.36 172.144 5.024C172.48 4.688 172.896 4.52 173.392 4.52C173.872 4.52 174.28 4.688 174.616 5.024C174.952 5.36 175.12 5.776 175.12 6.272C175.12 6.768 174.952 7.184 174.616 7.52C174.28 7.856 173.872 8.024 173.392 8.024ZM174.736 9.776V23H172V9.776H174.736ZM181.76 12.008V19.328C181.76 19.824 181.872 20.184 182.096 20.408C182.336 20.616 182.736 20.72 183.296 20.72H184.976V23H182.816C181.584 23 180.64 22.712 179.984 22.136C179.328 21.56 179 20.624 179 19.328V12.008H177.44V9.776H179V6.488H181.76V9.776H184.976V12.008H181.76ZM5.11768 63.464C3.54968 61.96 2.34168 60.048 1.49368 57.728C0.661684 55.408 0.245684 52.92 0.245684 50.264C0.245684 47.544 0.693684 44.976 1.58968 42.56C2.50168 40.144 3.83768 38.152 5.59768 36.584H8.42968V36.848C6.58968 38.544 5.20568 40.576 4.27768 42.944C3.34968 45.312 2.88568 47.752 2.88568 50.264C2.88568 52.68 3.31768 55.016 4.18168 57.272C5.04568 59.528 6.30168 61.504 7.94968 63.2V63.464H5.11768ZM13.8582 44.528V49.424H19.6182V51.656H13.8582V56.768H20.3382V59H11.1222V42.296H20.3382V44.528H13.8582ZM29.6121 52.304L33.8841 59H30.7881L27.9321 54.512L25.2441 59H22.3881L26.6601 52.496L22.3881 45.776H25.4841L28.3401 50.264L31.0281 45.776H33.8841L29.6121 52.304ZM37.5567 44.024C37.0607 44.024 36.6447 43.856 36.3087 43.52C35.9727 43.184 35.8047 42.768 35.8047 42.272C35.8047 41.776 35.9727 41.36 36.3087 41.024C36.6447 40.688 37.0607 40.52 37.5567 40.52C38.0367 40.52 38.4447 40.688 38.7807 41.024C39.1167 41.36 39.2847 41.776 39.2847 42.272C39.2847 42.768 39.1167 43.184 38.7807 43.52C38.4447 43.856 38.0367 44.024 37.5567 44.024ZM38.9007 45.776V59H36.1647V45.776H38.9007ZM45.9248 48.008V55.328C45.9248 55.824 46.0368 56.184 46.2608 56.408C46.5008 56.616 46.9008 56.72 47.4608 56.72H49.1408V59H46.9808C45.7488 59 44.8048 58.712 44.1488 58.136C43.4928 57.56 43.1648 56.624 43.1648 55.328V48.008H41.6048V45.776H43.1648V42.488H45.9248V45.776H49.1408V48.008H45.9248ZM63.9209 48.008H61.4729V59H58.7129V48.008H57.1529V45.776H58.7129V44.84C58.7129 43.32 59.1129 42.216 59.9129 41.528C60.7289 40.824 62.0009 40.472 63.7289 40.472V42.752C62.8969 42.752 62.3129 42.912 61.9769 43.232C61.6409 43.536 61.4729 44.072 61.4729 44.84V45.776H63.9209V48.008ZM72.3216 59.216C71.0736 59.216 69.9456 58.936 68.9376 58.376C67.9296 57.8 67.1376 57 66.5616 55.976C65.9856 54.936 65.6976 53.736 65.6976 52.376C65.6976 51.032 65.9936 49.84 66.5856 48.8C67.1776 47.76 67.9856 46.96 69.0096 46.4C70.0336 45.84 71.1776 45.56 72.4416 45.56C73.7056 45.56 74.8496 45.84 75.8736 46.4C76.8976 46.96 77.7056 47.76 78.2976 48.8C78.8896 49.84 79.1856 51.032 79.1856 52.376C79.1856 53.72 78.8816 54.912 78.2736 55.952C77.6656 56.992 76.8336 57.8 75.7776 58.376C74.7376 58.936 73.5856 59.216 72.3216 59.216ZM72.3216 56.84C73.0256 56.84 73.6816 56.672 74.2896 56.336C74.9136 56 75.4176 55.496 75.8016 54.824C76.1856 54.152 76.3776 53.336 76.3776 52.376C76.3776 51.416 76.1936 50.608 75.8256 49.952C75.4576 49.28 74.9696 48.776 74.3616 48.44C73.7536 48.104 73.0976 47.936 72.3936 47.936C71.6896 47.936 71.0336 48.104 70.4256 48.44C69.8336 48.776 69.3616 49.28 69.0096 49.952C68.6576 50.608 68.4816 51.416 68.4816 52.376C68.4816 53.8 68.8416 54.904 69.5616 55.688C70.2976 56.456 71.2176 56.84 72.3216 56.84ZM84.8663 47.696C85.2663 47.024 85.7943 46.504 86.4503 46.136C87.1223 45.752 87.9143 45.56 88.8263 45.56V48.392H88.1303C87.0583 48.392 86.2423 48.664 85.6823 49.208C85.1383 49.752 84.8663 50.696 84.8663 52.04V59H82.1303V45.776H84.8663V47.696ZM112.432 42.32L106.168 59H103L96.7116 42.32H99.6396L104.584 56.192L109.552 42.32H112.432ZM127.08 52.064C127.08 52.56 127.048 53.008 126.984 53.408H116.88C116.96 54.464 117.352 55.312 118.056 55.952C118.76 56.592 119.624 56.912 120.648 56.912C122.12 56.912 123.16 56.296 123.768 55.064H126.72C126.32 56.28 125.592 57.28 124.536 58.064C123.496 58.832 122.2 59.216 120.648 59.216C119.384 59.216 118.248 58.936 117.24 58.376C116.248 57.8 115.464 57 114.888 55.976C114.328 54.936 114.048 53.736 114.048 52.376C114.048 51.016 114.32 49.824 114.864 48.8C115.424 47.76 116.2 46.96 117.192 46.4C118.2 45.84 119.352 45.56 120.648 45.56C121.896 45.56 123.008 45.832 123.984 46.376C124.96 46.92 125.72 47.688 126.264 48.68C126.808 49.656 127.08 50.784 127.08 52.064ZM124.224 51.2C124.208 50.192 123.848 49.384 123.144 48.776C122.44 48.168 121.568 47.864 120.528 47.864C119.584 47.864 118.776 48.168 118.104 48.776C117.432 49.368 117.032 50.176 116.904 51.2H124.224ZM136.852 45.56C137.86 45.56 138.756 45.776 139.54 46.208C140.34 46.64 140.964 47.28 141.412 48.128C141.876 48.976 142.108 50 142.108 51.2V59H139.396V51.608C139.396 50.424 139.1 49.52 138.508 48.896C137.916 48.256 137.108 47.936 136.084 47.936C135.06 47.936 134.244 48.256 133.636 48.896C133.044 49.52 132.748 50.424 132.748 51.608V59H130.012V41.24H132.748V47.312C133.212 46.752 133.796 46.32 134.5 46.016C135.22 45.712 136.004 45.56 136.852 45.56ZM147.23 44.024C146.734 44.024 146.318 43.856 145.982 43.52C145.646 43.184 145.478 42.768 145.478 42.272C145.478 41.776 145.646 41.36 145.982 41.024C146.318 40.688 146.734 40.52 147.23 40.52C147.71 40.52 148.118 40.688 148.454 41.024C148.79 41.36 148.958 41.776 148.958 42.272C148.958 42.768 148.79 43.184 148.454 43.52C148.118 43.856 147.71 44.024 147.23 44.024ZM148.574 45.776V59H145.838V45.776H148.574ZM151.494 52.376C151.494 51.016 151.766 49.824 152.31 48.8C152.87 47.76 153.638 46.96 154.614 46.4C155.59 45.84 156.71 45.56 157.974 45.56C159.574 45.56 160.894 45.944 161.934 46.712C162.99 47.464 163.702 48.544 164.07 49.952H161.118C160.878 49.296 160.494 48.784 159.966 48.416C159.438 48.048 158.774 47.864 157.974 47.864C156.854 47.864 155.958 48.264 155.286 49.064C154.63 49.848 154.302 50.952 154.302 52.376C154.302 53.8 154.63 54.912 155.286 55.712C155.958 56.512 156.854 56.912 157.974 56.912C159.558 56.912 160.606 56.216 161.118 54.824H164.07C163.686 56.168 162.966 57.24 161.91 58.04C160.854 58.824 159.542 59.216 157.974 59.216C156.71 59.216 155.59 58.936 154.614 58.376C153.638 57.8 152.87 57 152.31 55.976C151.766 54.936 151.494 53.736 151.494 52.376ZM169.773 41.24V59H167.037V41.24H169.773ZM185.725 52.064C185.725 52.56 185.693 53.008 185.629 53.408H175.525C175.605 54.464 175.997 55.312 176.701 55.952C177.405 56.592 178.269 56.912 179.293 56.912C180.765 56.912 181.805 56.296 182.413 55.064H185.365C184.965 56.28 184.237 57.28 183.181 58.064C182.141 58.832 180.845 59.216 179.293 59.216C178.029 59.216 176.893 58.936 175.885 58.376C174.893 57.8 174.109 57 173.533 55.976C172.973 54.936 172.693 53.736 172.693 52.376C172.693 51.016 172.965 49.824 173.509 48.8C174.069 47.76 174.845 46.96 175.837 46.4C176.845 45.84 177.997 45.56 179.293 45.56C180.541 45.56 181.653 45.832 182.629 46.376C183.605 46.92 184.365 47.688 184.909 48.68C185.453 49.656 185.725 50.784 185.725 52.064ZM182.869 51.2C182.853 50.192 182.493 49.384 181.789 48.776C181.085 48.168 180.213 47.864 179.173 47.864C178.229 47.864 177.421 48.168 176.749 48.776C176.077 49.368 175.677 50.176 175.549 51.2H182.869ZM193.457 59.216C192.417 59.216 191.481 59.032 190.649 58.664C189.833 58.28 189.185 57.768 188.705 57.128C188.225 56.472 187.969 55.744 187.937 54.944H190.769C190.817 55.504 191.081 55.976 191.561 56.36C192.057 56.728 192.673 56.912 193.409 56.912C194.177 56.912 194.769 56.768 195.185 56.48C195.617 56.176 195.833 55.792 195.833 55.328C195.833 54.832 195.593 54.464 195.113 54.224C194.649 53.984 193.905 53.72 192.881 53.432C191.889 53.16 191.081 52.896 190.457 52.64C189.833 52.384 189.289 51.992 188.825 51.464C188.377 50.936 188.153 50.24 188.153 49.376C188.153 48.672 188.361 48.032 188.777 47.456C189.193 46.864 189.785 46.4 190.553 46.064C191.337 45.728 192.233 45.56 193.241 45.56C194.745 45.56 195.953 45.944 196.865 46.712C197.793 47.464 198.289 48.496 198.353 49.808H195.617C195.569 49.216 195.329 48.744 194.897 48.392C194.465 48.04 193.881 47.864 193.145 47.864C192.425 47.864 191.873 48 191.489 48.272C191.105 48.544 190.913 48.904 190.913 49.352C190.913 49.704 191.041 50 191.297 50.24C191.553 50.48 191.865 50.672 192.233 50.816C192.601 50.944 193.145 51.112 193.865 51.32C194.825 51.576 195.609 51.84 196.217 52.112C196.841 52.368 197.377 52.752 197.825 53.264C198.273 53.776 198.505 54.456 198.521 55.304C198.521 56.056 198.313 56.728 197.897 57.32C197.481 57.912 196.889 58.376 196.121 58.712C195.369 59.048 194.481 59.216 193.457 59.216ZM201.046 63.464V63.2C202.694 61.504 203.95 59.528 204.814 57.272C205.678 55.016 206.11 52.68 206.11 50.264C206.11 47.752 205.646 45.312 204.718 42.944C203.79 40.576 202.406 38.544 200.566 36.848V36.584H203.398C205.158 38.152 206.486 40.144 207.382 42.56C208.294 44.976 208.75 47.544 208.75 50.264C208.75 52.92 208.326 55.408 207.478 57.728C206.646 60.048 205.446 61.96 203.878 63.464H201.046Z" fill="#1F1C15"/>
        </svg>
      </div>
      {/* Entrance for Vehicles */}
      <div className="absolute inset-0 z-10 left-[2085] top-[1399] flex items-center justify-center pointer-events-none">
        <svg width="210" height="150" viewBox="0 0 300 125" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M59.101 8.528V13.424H64.861V15.656H59.101V20.768H65.581V23H56.365V6.296H65.581V8.528H59.101ZM75.8629 9.56C76.9029 9.56 77.8309 9.776 78.6469 10.208C79.4789 10.64 80.1269 11.28 80.5909 12.128C81.0549 12.976 81.2869 14 81.2869 15.2V23H78.5749V15.608C78.5749 14.424 78.2789 13.52 77.6869 12.896C77.0949 12.256 76.2869 11.936 75.2629 11.936C74.2389 11.936 73.4229 12.256 72.8149 12.896C72.2229 13.52 71.9269 14.424 71.9269 15.608V23H69.1909V9.776H71.9269V11.288C72.3749 10.744 72.9429 10.32 73.6309 10.016C74.3349 9.712 75.0789 9.56 75.8629 9.56ZM88.2089 12.008V19.328C88.2089 19.824 88.3209 20.184 88.5449 20.408C88.7849 20.616 89.1849 20.72 89.7449 20.72H91.4249V23H89.2649C88.0329 23 87.0889 22.712 86.4329 22.136C85.7769 21.56 85.4489 20.624 85.4489 19.328V12.008H83.8889V9.776H85.4489V6.488H88.2089V9.776H91.4249V12.008H88.2089ZM96.9226 11.696C97.3226 11.024 97.8506 10.504 98.5066 10.136C99.1786 9.752 99.9706 9.56 100.883 9.56V12.392H100.187C99.1146 12.392 98.2986 12.664 97.7386 13.208C97.1946 13.752 96.9226 14.696 96.9226 16.04V23H94.1866V9.776H96.9226V11.696ZM102.726 16.328C102.726 15 102.998 13.824 103.542 12.8C104.102 11.776 104.854 10.984 105.798 10.424C106.758 9.848 107.814 9.56 108.966 9.56C110.006 9.56 110.91 9.768 111.678 10.184C112.462 10.584 113.086 11.088 113.55 11.696V9.776H116.31V23H113.55V21.032C113.086 21.656 112.454 22.176 111.654 22.592C110.854 23.008 109.942 23.216 108.918 23.216C107.782 23.216 106.742 22.928 105.798 22.352C104.854 21.76 104.102 20.944 103.542 19.904C102.998 18.848 102.726 17.656 102.726 16.328ZM113.55 16.376C113.55 15.464 113.358 14.672 112.974 14C112.606 13.328 112.118 12.816 111.51 12.464C110.902 12.112 110.246 11.936 109.542 11.936C108.838 11.936 108.182 12.112 107.574 12.464C106.966 12.8 106.47 13.304 106.086 13.976C105.718 14.632 105.534 15.416 105.534 16.328C105.534 17.24 105.718 18.04 106.086 18.728C106.47 19.416 106.966 19.944 107.574 20.312C108.198 20.664 108.854 20.84 109.542 20.84C110.246 20.84 110.902 20.664 111.51 20.312C112.118 19.96 112.606 19.448 112.974 18.776C113.358 18.088 113.55 17.288 113.55 16.376ZM126.815 9.56C127.855 9.56 128.783 9.776 129.599 10.208C130.431 10.64 131.079 11.28 131.543 12.128C132.007 12.976 132.239 14 132.239 15.2V23H129.527V15.608C129.527 14.424 129.231 13.52 128.639 12.896C128.047 12.256 127.239 11.936 126.215 11.936C125.191 11.936 124.375 12.256 123.767 12.896C123.175 13.52 122.879 14.424 122.879 15.608V23H120.143V9.776H122.879V11.288C123.327 10.744 123.895 10.32 124.583 10.016C125.287 9.712 126.031 9.56 126.815 9.56ZM135.057 16.376C135.057 15.016 135.329 13.824 135.873 12.8C136.433 11.76 137.201 10.96 138.177 10.4C139.153 9.84 140.273 9.56 141.537 9.56C143.137 9.56 144.457 9.944 145.497 10.712C146.553 11.464 147.265 12.544 147.633 13.952H144.681C144.441 13.296 144.057 12.784 143.529 12.416C143.001 12.048 142.337 11.864 141.537 11.864C140.417 11.864 139.521 12.264 138.849 13.064C138.193 13.848 137.865 14.952 137.865 16.376C137.865 17.8 138.193 18.912 138.849 19.712C139.521 20.512 140.417 20.912 141.537 20.912C143.121 20.912 144.169 20.216 144.681 18.824H147.633C147.249 20.168 146.529 21.24 145.473 22.04C144.417 22.824 143.105 23.216 141.537 23.216C140.273 23.216 139.153 22.936 138.177 22.376C137.201 21.8 136.433 21 135.873 19.976C135.329 18.936 135.057 17.736 135.057 16.376ZM162.72 16.064C162.72 16.56 162.688 17.008 162.624 17.408H152.52C152.6 18.464 152.992 19.312 153.696 19.952C154.4 20.592 155.264 20.912 156.288 20.912C157.76 20.912 158.8 20.296 159.408 19.064H162.36C161.96 20.28 161.232 21.28 160.176 22.064C159.136 22.832 157.84 23.216 156.288 23.216C155.024 23.216 153.888 22.936 152.88 22.376C151.888 21.8 151.104 21 150.528 19.976C149.968 18.936 149.688 17.736 149.688 16.376C149.688 15.016 149.96 13.824 150.504 12.8C151.064 11.76 151.84 10.96 152.832 10.4C153.84 9.84 154.992 9.56 156.288 9.56C157.536 9.56 158.648 9.832 159.624 10.376C160.6 10.92 161.36 11.688 161.904 12.68C162.448 13.656 162.72 14.784 162.72 16.064ZM159.864 15.2C159.848 14.192 159.488 13.384 158.784 12.776C158.08 12.168 157.208 11.864 156.168 11.864C155.224 11.864 154.416 12.168 153.744 12.776C153.072 13.368 152.672 14.176 152.544 15.2H159.864ZM174.532 0.343998L168.004 27.2H165.316L171.82 0.343998H174.532ZM180.956 8.528V13.424H186.716V15.656H180.956V20.768H187.436V23H178.22V6.296H187.436V8.528H180.956ZM196.71 16.304L200.982 23H197.886L195.03 18.512L192.342 23H189.486L193.758 16.496L189.486 9.776H192.582L195.438 14.264L198.126 9.776H200.982L196.71 16.304ZM204.655 8.024C204.159 8.024 203.743 7.856 203.407 7.52C203.071 7.184 202.903 6.768 202.903 6.272C202.903 5.776 203.071 5.36 203.407 5.024C203.743 4.688 204.159 4.52 204.655 4.52C205.135 4.52 205.543 4.688 205.879 5.024C206.215 5.36 206.383 5.776 206.383 6.272C206.383 6.768 206.215 7.184 205.879 7.52C205.543 7.856 205.135 8.024 204.655 8.024ZM205.999 9.776V23H203.263V9.776H205.999ZM213.023 12.008V19.328C213.023 19.824 213.135 20.184 213.359 20.408C213.599 20.616 213.999 20.72 214.559 20.72H216.239V23H214.079C212.847 23 211.903 22.712 211.247 22.136C210.591 21.56 210.263 20.624 210.263 19.328V12.008H208.703V9.776H210.263V6.488H213.023V9.776H216.239V12.008H213.023ZM5.36425 63.464C3.79625 61.96 2.58825 60.048 1.74025 57.728C0.908251 55.408 0.492251 52.92 0.492251 50.264C0.492251 47.544 0.940251 44.976 1.83625 42.56C2.74825 40.144 4.08425 38.152 5.84425 36.584H8.67625V36.848C6.83625 38.544 5.45225 40.576 4.52425 42.944C3.59625 45.312 3.13225 47.752 3.13225 50.264C3.13225 52.68 3.56425 55.016 4.42825 57.272C5.29225 59.528 6.54825 61.504 8.19625 63.2V63.464H5.36425ZM14.1048 44.528V49.424H19.8648V51.656H14.1048V56.768H20.5848V59H11.3688V42.296H20.5848V44.528H14.1048ZM30.8667 45.56C31.9067 45.56 32.8347 45.776 33.6507 46.208C34.4827 46.64 35.1307 47.28 35.5947 48.128C36.0587 48.976 36.2907 50 36.2907 51.2V59H33.5787V51.608C33.5787 50.424 33.2827 49.52 32.6907 48.896C32.0987 48.256 31.2907 47.936 30.2667 47.936C29.2427 47.936 28.4267 48.256 27.8187 48.896C27.2267 49.52 26.9307 50.424 26.9307 51.608V59H24.1947V45.776H26.9307V47.288C27.3787 46.744 27.9467 46.32 28.6347 46.016C29.3387 45.712 30.0827 45.56 30.8667 45.56ZM43.2126 48.008V55.328C43.2126 55.824 43.3246 56.184 43.5486 56.408C43.7886 56.616 44.1886 56.72 44.7486 56.72H46.4286V59H44.2686C43.0366 59 42.0926 58.712 41.4366 58.136C40.7806 57.56 40.4526 56.624 40.4526 55.328V48.008H38.8926V45.776H40.4526V42.488H43.2126V45.776H46.4286V48.008H43.2126ZM51.9263 47.696C52.3263 47.024 52.8543 46.504 53.5103 46.136C54.1823 45.752 54.9743 45.56 55.8863 45.56V48.392H55.1903C54.1183 48.392 53.3023 48.664 52.7423 49.208C52.1983 49.752 51.9263 50.696 51.9263 52.04V59H49.1903V45.776H51.9263V47.696ZM57.7293 52.328C57.7293 51 58.0013 49.824 58.5453 48.8C59.1053 47.776 59.8573 46.984 60.8013 46.424C61.7613 45.848 62.8173 45.56 63.9693 45.56C65.0093 45.56 65.9133 45.768 66.6813 46.184C67.4653 46.584 68.0893 47.088 68.5533 47.696V45.776H71.3133V59H68.5533V57.032C68.0893 57.656 67.4573 58.176 66.6573 58.592C65.8573 59.008 64.9453 59.216 63.9213 59.216C62.7853 59.216 61.7453 58.928 60.8013 58.352C59.8573 57.76 59.1053 56.944 58.5453 55.904C58.0013 54.848 57.7293 53.656 57.7293 52.328ZM68.5533 52.376C68.5533 51.464 68.3613 50.672 67.9773 50C67.6093 49.328 67.1213 48.816 66.5133 48.464C65.9053 48.112 65.2493 47.936 64.5453 47.936C63.8413 47.936 63.1853 48.112 62.5773 48.464C61.9693 48.8 61.4733 49.304 61.0893 49.976C60.7213 50.632 60.5373 51.416 60.5373 52.328C60.5373 53.24 60.7213 54.04 61.0893 54.728C61.4733 55.416 61.9693 55.944 62.5773 56.312C63.2013 56.664 63.8573 56.84 64.5453 56.84C65.2493 56.84 65.9053 56.664 66.5133 56.312C67.1213 55.96 67.6093 55.448 67.9773 54.776C68.3613 54.088 68.5533 53.288 68.5533 52.376ZM81.8189 45.56C82.8589 45.56 83.7869 45.776 84.6029 46.208C85.4349 46.64 86.0829 47.28 86.5469 48.128C87.0109 48.976 87.2429 50 87.2429 51.2V59H84.5309V51.608C84.5309 50.424 84.2349 49.52 83.6429 48.896C83.0509 48.256 82.2429 47.936 81.2189 47.936C80.1949 47.936 79.3789 48.256 78.7709 48.896C78.1789 49.52 77.8829 50.424 77.8829 51.608V59H75.1469V45.776H77.8829V47.288C78.3309 46.744 78.8989 46.32 79.5869 46.016C80.2909 45.712 81.0349 45.56 81.8189 45.56ZM90.0608 52.376C90.0608 51.016 90.3328 49.824 90.8768 48.8C91.4368 47.76 92.2048 46.96 93.1808 46.4C94.1568 45.84 95.2768 45.56 96.5408 45.56C98.1408 45.56 99.4608 45.944 100.501 46.712C101.557 47.464 102.269 48.544 102.637 49.952H99.6848C99.4448 49.296 99.0608 48.784 98.5328 48.416C98.0048 48.048 97.3408 47.864 96.5408 47.864C95.4208 47.864 94.5248 48.264 93.8528 49.064C93.1968 49.848 92.8688 50.952 92.8688 52.376C92.8688 53.8 93.1968 54.912 93.8528 55.712C94.5248 56.512 95.4208 56.912 96.5408 56.912C98.1248 56.912 99.1728 56.216 99.6848 54.824H102.637C102.253 56.168 101.533 57.24 100.477 58.04C99.4208 58.824 98.1088 59.216 96.5408 59.216C95.2768 59.216 94.1568 58.936 93.1808 58.376C92.2048 57.8 91.4368 57 90.8768 55.976C90.3328 54.936 90.0608 53.736 90.0608 52.376ZM117.723 52.064C117.723 52.56 117.691 53.008 117.627 53.408H107.523C107.603 54.464 107.995 55.312 108.699 55.952C109.403 56.592 110.267 56.912 111.291 56.912C112.763 56.912 113.803 56.296 114.411 55.064H117.363C116.963 56.28 116.235 57.28 115.179 58.064C114.139 58.832 112.843 59.216 111.291 59.216C110.027 59.216 108.891 58.936 107.883 58.376C106.891 57.8 106.107 57 105.531 55.976C104.971 54.936 104.691 53.736 104.691 52.376C104.691 51.016 104.963 49.824 105.507 48.8C106.067 47.76 106.843 46.96 107.835 46.4C108.843 45.84 109.995 45.56 111.291 45.56C112.539 45.56 113.651 45.832 114.627 46.376C115.603 46.92 116.363 47.688 116.907 48.68C117.451 49.656 117.723 50.784 117.723 52.064ZM114.867 51.2C114.851 50.192 114.491 49.384 113.787 48.776C113.083 48.168 112.211 47.864 111.171 47.864C110.227 47.864 109.419 48.168 108.747 48.776C108.075 49.368 107.675 50.176 107.547 51.2H114.867ZM132.674 48.008H130.226V59H127.466V48.008H125.906V45.776H127.466V44.84C127.466 43.32 127.866 42.216 128.666 41.528C129.482 40.824 130.754 40.472 132.482 40.472V42.752C131.65 42.752 131.066 42.912 130.73 43.232C130.394 43.536 130.226 44.072 130.226 44.84V45.776H132.674V48.008ZM141.075 59.216C139.827 59.216 138.699 58.936 137.691 58.376C136.683 57.8 135.891 57 135.315 55.976C134.739 54.936 134.451 53.736 134.451 52.376C134.451 51.032 134.747 49.84 135.339 48.8C135.931 47.76 136.739 46.96 137.763 46.4C138.787 45.84 139.931 45.56 141.195 45.56C142.459 45.56 143.603 45.84 144.627 46.4C145.651 46.96 146.459 47.76 147.051 48.8C147.643 49.84 147.939 51.032 147.939 52.376C147.939 53.72 147.635 54.912 147.027 55.952C146.419 56.992 145.587 57.8 144.531 58.376C143.491 58.936 142.339 59.216 141.075 59.216ZM141.075 56.84C141.779 56.84 142.435 56.672 143.043 56.336C143.667 56 144.171 55.496 144.555 54.824C144.939 54.152 145.131 53.336 145.131 52.376C145.131 51.416 144.947 50.608 144.579 49.952C144.211 49.28 143.723 48.776 143.115 48.44C142.507 48.104 141.851 47.936 141.147 47.936C140.443 47.936 139.787 48.104 139.179 48.44C138.587 48.776 138.115 49.28 137.763 49.952C137.411 50.608 137.235 51.416 137.235 52.376C137.235 53.8 137.595 54.904 138.315 55.688C139.051 56.456 139.971 56.84 141.075 56.84ZM153.62 47.696C154.02 47.024 154.548 46.504 155.204 46.136C155.876 45.752 156.668 45.56 157.58 45.56V48.392H156.884C155.812 48.392 154.996 48.664 154.436 49.208C153.892 49.752 153.62 50.696 153.62 52.04V59H150.884V45.776H153.62V47.696ZM181.185 42.32L174.921 59H171.753L165.465 42.32H168.393L173.337 56.192L178.305 42.32H181.185ZM195.833 52.064C195.833 52.56 195.801 53.008 195.737 53.408H185.633C185.713 54.464 186.105 55.312 186.809 55.952C187.513 56.592 188.377 56.912 189.401 56.912C190.873 56.912 191.913 56.296 192.521 55.064H195.473C195.073 56.28 194.345 57.28 193.289 58.064C192.249 58.832 190.953 59.216 189.401 59.216C188.137 59.216 187.001 58.936 185.993 58.376C185.001 57.8 184.217 57 183.641 55.976C183.081 54.936 182.801 53.736 182.801 52.376C182.801 51.016 183.073 49.824 183.617 48.8C184.177 47.76 184.953 46.96 185.945 46.4C186.953 45.84 188.105 45.56 189.401 45.56C190.649 45.56 191.761 45.832 192.737 46.376C193.713 46.92 194.473 47.688 195.017 48.68C195.561 49.656 195.833 50.784 195.833 52.064ZM192.977 51.2C192.961 50.192 192.601 49.384 191.897 48.776C191.193 48.168 190.321 47.864 189.281 47.864C188.337 47.864 187.529 48.168 186.857 48.776C186.185 49.368 185.785 50.176 185.657 51.2H192.977ZM205.606 45.56C206.614 45.56 207.51 45.776 208.294 46.208C209.094 46.64 209.718 47.28 210.166 48.128C210.63 48.976 210.862 50 210.862 51.2V59H208.15V51.608C208.15 50.424 207.854 49.52 207.262 48.896C206.67 48.256 205.862 47.936 204.838 47.936C203.814 47.936 202.998 48.256 202.39 48.896C201.798 49.52 201.502 50.424 201.502 51.608V59H198.766V41.24H201.502V47.312C201.966 46.752 202.55 46.32 203.254 46.016C203.974 45.712 204.758 45.56 205.606 45.56ZM215.984 44.024C215.488 44.024 215.072 43.856 214.736 43.52C214.4 43.184 214.232 42.768 214.232 42.272C214.232 41.776 214.4 41.36 214.736 41.024C215.072 40.688 215.488 40.52 215.984 40.52C216.464 40.52 216.872 40.688 217.208 41.024C217.544 41.36 217.712 41.776 217.712 42.272C217.712 42.768 217.544 43.184 217.208 43.52C216.872 43.856 216.464 44.024 215.984 44.024ZM217.328 45.776V59H214.592V45.776H217.328ZM220.248 52.376C220.248 51.016 220.52 49.824 221.064 48.8C221.624 47.76 222.392 46.96 223.368 46.4C224.344 45.84 225.464 45.56 226.728 45.56C228.328 45.56 229.648 45.944 230.688 46.712C231.744 47.464 232.456 48.544 232.824 49.952H229.872C229.632 49.296 229.248 48.784 228.72 48.416C228.192 48.048 227.528 47.864 226.728 47.864C225.608 47.864 224.712 48.264 224.04 49.064C223.384 49.848 223.056 50.952 223.056 52.376C223.056 53.8 223.384 54.912 224.04 55.712C224.712 56.512 225.608 56.912 226.728 56.912C228.312 56.912 229.36 56.216 229.872 54.824H232.824C232.44 56.168 231.72 57.24 230.664 58.04C229.608 58.824 228.296 59.216 226.728 59.216C225.464 59.216 224.344 58.936 223.368 58.376C222.392 57.8 221.624 57 221.064 55.976C220.52 54.936 220.248 53.736 220.248 52.376ZM238.526 41.24V59H235.79V41.24H238.526ZM254.478 52.064C254.478 52.56 254.446 53.008 254.382 53.408H244.278C244.358 54.464 244.75 55.312 245.454 55.952C246.158 56.592 247.022 56.912 248.046 56.912C249.518 56.912 250.558 56.296 251.166 55.064H254.118C253.718 56.28 252.99 57.28 251.934 58.064C250.894 58.832 249.598 59.216 248.046 59.216C246.782 59.216 245.646 58.936 244.638 58.376C243.646 57.8 242.862 57 242.286 55.976C241.726 54.936 241.446 53.736 241.446 52.376C241.446 51.016 241.718 49.824 242.262 48.8C242.822 47.76 243.598 46.96 244.59 46.4C245.598 45.84 246.75 45.56 248.046 45.56C249.294 45.56 250.406 45.832 251.382 46.376C252.358 46.92 253.118 47.688 253.662 48.68C254.206 49.656 254.478 50.784 254.478 52.064ZM251.622 51.2C251.606 50.192 251.246 49.384 250.542 48.776C249.838 48.168 248.966 47.864 247.926 47.864C246.982 47.864 246.174 48.168 245.502 48.776C244.83 49.368 244.43 50.176 244.302 51.2H251.622ZM262.211 59.216C261.171 59.216 260.235 59.032 259.403 58.664C258.587 58.28 257.939 57.768 257.459 57.128C256.979 56.472 256.723 55.744 256.691 54.944H259.523C259.571 55.504 259.835 55.976 260.315 56.36C260.811 56.728 261.427 56.912 262.163 56.912C262.931 56.912 263.523 56.768 263.939 56.48C264.371 56.176 264.587 55.792 264.587 55.328C264.587 54.832 264.347 54.464 263.867 54.224C263.403 53.984 262.659 53.72 261.635 53.432C260.643 53.16 259.835 52.896 259.211 52.64C258.587 52.384 258.043 51.992 257.579 51.464C257.131 50.936 256.907 50.24 256.907 49.376C256.907 48.672 257.115 48.032 257.531 47.456C257.947 46.864 258.539 46.4 259.307 46.064C260.091 45.728 260.987 45.56 261.995 45.56C263.499 45.56 264.707 45.944 265.619 46.712C266.547 47.464 267.043 48.496 267.107 49.808H264.371C264.323 49.216 264.083 48.744 263.651 48.392C263.219 48.04 262.635 47.864 261.899 47.864C261.179 47.864 260.627 48 260.243 48.272C259.859 48.544 259.667 48.904 259.667 49.352C259.667 49.704 259.795 50 260.051 50.24C260.307 50.48 260.619 50.672 260.987 50.816C261.355 50.944 261.899 51.112 262.619 51.32C263.579 51.576 264.363 51.84 264.971 52.112C265.595 52.368 266.131 52.752 266.579 53.264C267.027 53.776 267.259 54.456 267.275 55.304C267.275 56.056 267.067 56.728 266.651 57.32C266.235 57.912 265.643 58.376 264.875 58.712C264.123 59.048 263.235 59.216 262.211 59.216ZM269.799 63.464V63.2C271.447 61.504 272.703 59.528 273.567 57.272C274.431 55.016 274.863 52.68 274.863 50.264C274.863 47.752 274.399 45.312 273.471 42.944C272.543 40.576 271.159 38.544 269.319 36.848V36.584H272.151C273.911 38.152 275.239 40.144 276.135 42.56C277.047 44.976 277.503 47.544 277.503 50.264C277.503 52.92 277.079 55.408 276.231 57.728C275.399 60.048 274.199 61.96 272.631 63.464H269.799Z" fill="#1F1C15"/>
        </svg>
      </div>
      {/* To VSU Lower Campus */}
      <div className="absolute inset-0 z-10 right-[345] bottom-[1125] flex items-center justify-center pointer-events-none">
        <svg width="210" height="80" viewBox="0 0 280 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.6621 0.319999V2.552H7.22209V17H4.48609V2.552H0.0220901V0.319999H11.6621ZM20.409 17.216C19.161 17.216 18.033 16.936 17.025 16.376C16.017 15.8 15.225 15 14.649 13.976C14.073 12.936 13.785 11.736 13.785 10.376C13.785 9.032 14.081 7.84 14.673 6.8C15.265 5.76 16.073 4.96 17.097 4.4C18.121 3.84 19.265 3.56 20.529 3.56C21.793 3.56 22.937 3.84 23.961 4.4C24.985 4.96 25.793 5.76 26.385 6.8C26.977 7.84 27.273 9.032 27.273 10.376C27.273 11.72 26.969 12.912 26.361 13.952C25.753 14.992 24.921 15.8 23.865 16.376C22.825 16.936 21.673 17.216 20.409 17.216ZM20.409 14.84C21.113 14.84 21.769 14.672 22.377 14.336C23.001 14 23.505 13.496 23.889 12.824C24.273 12.152 24.465 11.336 24.465 10.376C24.465 9.416 24.281 8.608 23.913 7.952C23.545 7.28 23.057 6.776 22.449 6.44C21.841 6.104 21.185 5.936 20.481 5.936C19.777 5.936 19.121 6.104 18.513 6.44C17.921 6.776 17.449 7.28 17.097 7.952C16.745 8.608 16.569 9.416 16.569 10.376C16.569 11.8 16.929 12.904 17.649 13.688C18.385 14.456 19.305 14.84 20.409 14.84ZM51.068 0.319999L44.804 17H41.636L35.348 0.319999H38.276L43.22 14.192L48.188 0.319999H51.068ZM59.0921 17.168C57.9721 17.168 56.9641 16.976 56.0681 16.592C55.1721 16.192 54.4681 15.632 53.9561 14.912C53.4441 14.192 53.1881 13.352 53.1881 12.392H56.1161C56.1801 13.112 56.4601 13.704 56.9561 14.168C57.4681 14.632 58.1801 14.864 59.0921 14.864C60.0361 14.864 60.7721 14.64 61.3001 14.192C61.8281 13.728 62.0921 13.136 62.0921 12.416C62.0921 11.856 61.9241 11.4 61.5881 11.048C61.2681 10.696 60.8601 10.424 60.3641 10.232C59.8841 10.04 59.2121 9.832 58.3481 9.608C57.2601 9.32 56.3721 9.032 55.6841 8.744C55.0121 8.44 54.4361 7.976 53.9561 7.352C53.4761 6.728 53.2361 5.896 53.2361 4.856C53.2361 3.896 53.4761 3.056 53.9561 2.336C54.4361 1.616 55.1081 1.064 55.9721 0.68C56.8361 0.295999 57.8361 0.103999 58.9721 0.103999C60.5881 0.103999 61.9081 0.511999 62.9321 1.328C63.9721 2.128 64.5481 3.232 64.6601 4.64H61.6361C61.5881 4.032 61.3001 3.512 60.7721 3.08C60.2441 2.648 59.5481 2.432 58.6841 2.432C57.9001 2.432 57.2601 2.632 56.7641 3.032C56.2681 3.432 56.0201 4.008 56.0201 4.76C56.0201 5.272 56.1721 5.696 56.4761 6.032C56.7961 6.352 57.1961 6.608 57.6761 6.8C58.1561 6.992 58.8121 7.2 59.6441 7.424C60.7481 7.728 61.6441 8.032 62.3321 8.336C63.0361 8.64 63.6281 9.112 64.1081 9.752C64.6041 10.376 64.8521 11.216 64.8521 12.272C64.8521 13.12 64.6201 13.92 64.1561 14.672C63.7081 15.424 63.0441 16.032 62.1641 16.496C61.3001 16.944 60.2761 17.168 59.0921 17.168ZM71.0325 0.319999V10.952C71.0325 12.216 71.3605 13.168 72.0165 13.808C72.6885 14.448 73.6165 14.768 74.8005 14.768C76.0005 14.768 76.9285 14.448 77.5845 13.808C78.2565 13.168 78.5925 12.216 78.5925 10.952V0.319999H81.3285V10.904C81.3285 12.264 81.0325 13.416 80.4405 14.36C79.8485 15.304 79.0565 16.008 78.0645 16.472C77.0725 16.936 75.9765 17.168 74.7765 17.168C73.5765 17.168 72.4805 16.936 71.4885 16.472C70.5125 16.008 69.7365 15.304 69.1605 14.36C68.5845 13.416 68.2965 12.264 68.2965 10.904V0.319999H71.0325ZM94.3412 14.792H99.9812V17H91.6052V0.319999H94.3412V14.792ZM108.245 17.216C106.997 17.216 105.869 16.936 104.861 16.376C103.853 15.8 103.061 15 102.485 13.976C101.909 12.936 101.621 11.736 101.621 10.376C101.621 9.032 101.917 7.84 102.509 6.8C103.101 5.76 103.909 4.96 104.933 4.4C105.957 3.84 107.101 3.56 108.365 3.56C109.629 3.56 110.773 3.84 111.797 4.4C112.821 4.96 113.629 5.76 114.221 6.8C114.813 7.84 115.109 9.032 115.109 10.376C115.109 11.72 114.805 12.912 114.197 13.952C113.589 14.992 112.757 15.8 111.701 16.376C110.661 16.936 109.509 17.216 108.245 17.216ZM108.245 14.84C108.949 14.84 109.605 14.672 110.213 14.336C110.837 14 111.341 13.496 111.725 12.824C112.109 12.152 112.301 11.336 112.301 10.376C112.301 9.416 112.117 8.608 111.749 7.952C111.381 7.28 110.893 6.776 110.285 6.44C109.677 6.104 109.021 5.936 108.317 5.936C107.613 5.936 106.957 6.104 106.349 6.44C105.757 6.776 105.285 7.28 104.933 7.952C104.581 8.608 104.405 9.416 104.405 10.376C104.405 11.8 104.765 12.904 105.485 13.688C106.221 14.456 107.141 14.84 108.245 14.84ZM135.814 3.776L131.71 17H128.83L126.166 7.232L123.502 17H120.622L116.494 3.776H119.278L122.038 14.408L124.846 3.776H127.702L130.39 14.36L133.126 3.776H135.814ZM150.219 10.064C150.219 10.56 150.187 11.008 150.123 11.408H140.019C140.099 12.464 140.491 13.312 141.195 13.952C141.899 14.592 142.763 14.912 143.787 14.912C145.259 14.912 146.299 14.296 146.907 13.064H149.859C149.459 14.28 148.731 15.28 147.675 16.064C146.635 16.832 145.339 17.216 143.787 17.216C142.523 17.216 141.387 16.936 140.379 16.376C139.387 15.8 138.603 15 138.027 13.976C137.467 12.936 137.187 11.736 137.187 10.376C137.187 9.016 137.459 7.824 138.003 6.8C138.563 5.76 139.339 4.96 140.331 4.4C141.339 3.84 142.491 3.56 143.787 3.56C145.035 3.56 146.147 3.832 147.123 4.376C148.099 4.92 148.859 5.688 149.403 6.68C149.947 7.656 150.219 8.784 150.219 10.064ZM147.363 9.2C147.347 8.192 146.987 7.384 146.283 6.776C145.579 6.168 144.707 5.864 143.667 5.864C142.723 5.864 141.915 6.168 141.243 6.776C140.571 7.368 140.171 8.176 140.043 9.2H147.363ZM155.887 5.696C156.287 5.024 156.815 4.504 157.471 4.136C158.143 3.752 158.935 3.56 159.847 3.56V6.392H159.151C158.079 6.392 157.263 6.664 156.703 7.208C156.159 7.752 155.887 8.696 155.887 10.04V17H153.151V3.776H155.887V5.696ZM168.164 8.624C168.164 6.992 168.54 5.528 169.292 4.232C170.06 2.936 171.092 1.928 172.388 1.208C173.7 0.471999 175.132 0.103999 176.684 0.103999C178.46 0.103999 180.036 0.543999 181.412 1.424C182.804 2.288 183.812 3.52 184.436 5.12H181.148C180.716 4.24 180.116 3.584 179.348 3.152C178.58 2.72 177.692 2.504 176.684 2.504C175.58 2.504 174.596 2.752 173.732 3.248C172.868 3.744 172.188 4.456 171.692 5.384C171.212 6.312 170.972 7.392 170.972 8.624C170.972 9.856 171.212 10.936 171.692 11.864C172.188 12.792 172.868 13.512 173.732 14.024C174.596 14.52 175.58 14.768 176.684 14.768C177.692 14.768 178.58 14.552 179.348 14.12C180.116 13.688 180.716 13.032 181.148 12.152H184.436C183.812 13.752 182.804 14.984 181.412 15.848C180.036 16.712 178.46 17.144 176.684 17.144C175.116 17.144 173.684 16.784 172.388 16.064C171.092 15.328 170.06 14.312 169.292 13.016C168.54 11.72 168.164 10.256 168.164 8.624ZM186.967 10.328C186.967 9 187.239 7.824 187.783 6.8C188.343 5.776 189.095 4.984 190.039 4.424C190.999 3.848 192.055 3.56 193.207 3.56C194.247 3.56 195.151 3.768 195.919 4.184C196.703 4.584 197.327 5.088 197.791 5.696V3.776H200.551V17H197.791V15.032C197.327 15.656 196.695 16.176 195.895 16.592C195.095 17.008 194.183 17.216 193.159 17.216C192.023 17.216 190.983 16.928 190.039 16.352C189.095 15.76 188.343 14.944 187.783 13.904C187.239 12.848 186.967 11.656 186.967 10.328ZM197.791 10.376C197.791 9.464 197.599 8.672 197.215 8C196.847 7.328 196.359 6.816 195.751 6.464C195.143 6.112 194.487 5.936 193.783 5.936C193.079 5.936 192.423 6.112 191.815 6.464C191.207 6.8 190.711 7.304 190.327 7.976C189.959 8.632 189.775 9.416 189.775 10.328C189.775 11.24 189.959 12.04 190.327 12.728C190.711 13.416 191.207 13.944 191.815 14.312C192.439 14.664 193.095 14.84 193.783 14.84C194.487 14.84 195.143 14.664 195.751 14.312C196.359 13.96 196.847 13.448 197.215 12.776C197.599 12.088 197.791 11.288 197.791 10.376ZM220.393 3.56C221.433 3.56 222.361 3.776 223.177 4.208C224.009 4.64 224.657 5.28 225.121 6.128C225.601 6.976 225.841 8 225.841 9.2V17H223.129V9.608C223.129 8.424 222.833 7.52 222.241 6.896C221.649 6.256 220.841 5.936 219.817 5.936C218.793 5.936 217.977 6.256 217.369 6.896C216.777 7.52 216.481 8.424 216.481 9.608V17H213.769V9.608C213.769 8.424 213.473 7.52 212.881 6.896C212.289 6.256 211.481 5.936 210.457 5.936C209.433 5.936 208.617 6.256 208.009 6.896C207.417 7.52 207.121 8.424 207.121 9.608V17H204.385V3.776H207.121V5.288C207.569 4.744 208.137 4.32 208.825 4.016C209.513 3.712 210.249 3.56 211.033 3.56C212.089 3.56 213.033 3.784 213.865 4.232C214.697 4.68 215.337 5.328 215.785 6.176C216.185 5.376 216.809 4.744 217.657 4.28C218.505 3.8 219.417 3.56 220.393 3.56ZM232.298 5.72C232.762 5.112 233.394 4.6 234.194 4.184C234.994 3.768 235.898 3.56 236.906 3.56C238.058 3.56 239.106 3.848 240.05 4.424C241.01 4.984 241.762 5.776 242.306 6.8C242.85 7.824 243.122 9 243.122 10.328C243.122 11.656 242.85 12.848 242.306 13.904C241.762 14.944 241.01 15.76 240.05 16.352C239.106 16.928 238.058 17.216 236.906 17.216C235.898 17.216 235.002 17.016 234.218 16.616C233.434 16.2 232.794 15.688 232.298 15.08V23.288H229.562V3.776H232.298V5.72ZM240.338 10.328C240.338 9.416 240.146 8.632 239.762 7.976C239.394 7.304 238.898 6.8 238.274 6.464C237.666 6.112 237.01 5.936 236.306 5.936C235.618 5.936 234.962 6.112 234.338 6.464C233.73 6.816 233.234 7.328 232.85 8C232.482 8.672 232.298 9.464 232.298 10.376C232.298 11.288 232.482 12.088 232.85 12.776C233.234 13.448 233.73 13.96 234.338 14.312C234.962 14.664 235.618 14.84 236.306 14.84C237.01 14.84 237.666 14.664 238.274 14.312C238.898 13.944 239.394 13.416 239.762 12.728C240.146 12.04 240.338 11.24 240.338 10.328ZM258.044 3.776V17H255.308V15.44C254.876 15.984 254.308 16.416 253.604 16.736C252.916 17.04 252.18 17.192 251.396 17.192C250.356 17.192 249.42 16.976 248.588 16.544C247.772 16.112 247.124 15.472 246.644 14.624C246.18 13.776 245.948 12.752 245.948 11.552V3.776H248.66V11.144C248.66 12.328 248.956 13.24 249.548 13.88C250.14 14.504 250.948 14.816 251.972 14.816C252.996 14.816 253.804 14.504 254.396 13.88C255.004 13.24 255.308 12.328 255.308 11.144V3.776H258.044ZM266.694 17.216C265.654 17.216 264.718 17.032 263.886 16.664C263.07 16.28 262.422 15.768 261.942 15.128C261.462 14.472 261.206 13.744 261.174 12.944H264.006C264.054 13.504 264.318 13.976 264.798 14.36C265.294 14.728 265.91 14.912 266.646 14.912C267.414 14.912 268.006 14.768 268.422 14.48C268.854 14.176 269.07 13.792 269.07 13.328C269.07 12.832 268.83 12.464 268.35 12.224C267.886 11.984 267.142 11.72 266.118 11.432C265.126 11.16 264.318 10.896 263.694 10.64C263.07 10.384 262.526 9.992 262.062 9.464C261.614 8.936 261.39 8.24 261.39 7.376C261.39 6.672 261.598 6.032 262.014 5.456C262.43 4.864 263.022 4.4 263.79 4.064C264.574 3.728 265.47 3.56 266.478 3.56C267.982 3.56 269.19 3.944 270.102 4.712C271.03 5.464 271.526 6.496 271.59 7.808H268.854C268.806 7.216 268.566 6.744 268.134 6.392C267.702 6.04 267.118 5.864 266.382 5.864C265.662 5.864 265.11 6 264.726 6.272C264.342 6.544 264.15 6.904 264.15 7.352C264.15 7.704 264.278 8 264.534 8.24C264.79 8.48 265.102 8.672 265.47 8.816C265.838 8.944 266.382 9.112 267.102 9.32C268.062 9.576 268.846 9.84 269.454 10.112C270.078 10.368 270.614 10.752 271.062 11.264C271.51 11.776 271.742 12.456 271.758 13.304C271.758 14.056 271.55 14.728 271.134 15.32C270.718 15.912 270.126 16.376 269.358 16.712C268.606 17.048 267.718 17.216 266.694 17.216Z" fill="#1F1C15"/>
        </svg>
      </div>

      {/* Map rectangles */}
      {rectangleData.map(rect => (
        <MapRectangle
          key={rect.id}
          id={rect.id}
          style={rect.style}
          title={rect.title}
          isClickable={rect.isClickable}
          icon={rect.icon}
          iconColor={rect.iconColor}
          isSelected={selectedRectangle === rect.id}
          getTooltipPosition={getTooltipPosition}
          onClick={handleRectangleClick}
        />
        ))}
      </div>
    </div>
  );
}

export default mapComponent;